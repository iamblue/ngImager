/*! ngimager - v0.0.1 - 2013-12-12 | Copyright (c) 2013 Po-Ju Chen <tonyone0902@gmail.com> */

"use strict";angular.module("ngimager",[]).service("imager",function(a,b){var c=a,d=document.body,e=document.documentElement,f=function(){b.$$width=c.innerWidth||0,b.$$height=c.innerHeight||0,c.onresize=function(){f()}},g=function(){return d.scrollHeight||e.scrollHeight||0},h=function(){return d.scrollTop||e.scrollTop||0},i=function(){g(),h(),requestAnimationFrame(i)};this.utils={},this.utils.foreach=function(){},this.replaceArr=function(a){return a.sort(function(a,b){return a-b})},this.utils.getInlineCSS=function(){if(element.__style)return element.__style;var a=element.getAttribute("style")||"",b=/([^:\s]+)\s*:\s*([^;]+)/g,c={};return a.replace(b,function(a,b,d){c[b]=d.trim()}),element.__style=c,c},this.requestAnimationFrame=function(){return c.requestAnimationFrame||c.mozRequestAnimationFrame||c.webkitRequestAnimationFrame||c.msRequestAnimationFrame||setTimeout},this.cancelAnimationFrame=function(){return c.cancelAnimationFrame||mozcancelAnimationFrame||c.webkitcancelAnimationFrame||c.mscancelAnimationFrame||c.msRequestAnimationFrame||setInterval},this.init=function(){f(),requestAnimationFrame(i)},this.init()}).factory("_resize",function(a){console.log(a)}).factory("_scroll",function(a){console.log(a)}).directive("ngImgrClick",["imager",function(){return{replace:!0,restrict:"AE",link:function(){}}}]).directive("ngImgr",["imager","_resize",function(a){return{restrict:"AE",link:function(b,c,d){if(d.ngSize){var e=d.ngSize.split(",");e=a.replaceArr(e)}else var e=[];var f=c[0].clientWidth,g=[];angular.forEach(e,function(a,b){a>f&&(e[b]?g.push(e[b]):g.push(e[0]))}),0==g.length&&g.push(e[e.length-1]),b.width=g[0]}}}]);